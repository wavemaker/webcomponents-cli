(function(appName) {
    wcAppName = appName;
    const mountStyle = (styleSheetUrl) => {
        var head  = document.getElementsByTagName('head')[0];
        var link  = document.createElement('link');
        link.rel  = 'stylesheet';
        link.type = 'text/css';
        link.href = styleSheetUrl;
        link.media = 'all';
        head.appendChild(link);
    }

    const mountStyles = () => {
        function getRuntimeUrl(aName): string {
            let scriptSelector = `script[src*="wm-${aName}.js"]`
            // Find the script tag that loads our web component
            const scriptElement = document.querySelector(scriptSelector) as HTMLScriptElement;
            if (scriptElement) {
                const scriptSrc = scriptElement.src;
                const basePath = scriptSrc.substring(0, scriptSrc.lastIndexOf('/') + 1);
                return basePath;
            }
            return '/ng-bundle/';
        }
        //@ts-ignore
        WM_APPS_META[appName].artifactsUrl = getRuntimeUrl(appName);

        let styles= ["wm-styles.css", "styles.css"];
        styles.map(function(stylesheet) {
            //@ts-ignore
            let artifactsUrl = WM_APPS_META[appName].artifactsUrl;
            artifactsUrl = (artifactsUrl.slice(-1) === "/" ? artifactsUrl.slice(0, -1) : artifactsUrl)
            mountStyle(artifactsUrl + '/' + stylesheet);
        });
    }

    mountStyles();
})("{{appName}}")